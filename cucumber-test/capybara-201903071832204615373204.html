<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <title>Favorite List</title>

    <!-- maxcdn -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

    <!-- bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous" />


    <!-- fav icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />

    <!-- style  -->
    <link href="./css/main.css?version=5" rel="stylesheet" />
    
    <script>
    	function toSearch(){
    		window.location.href = "/Search.html";
    	}
    	function toResult(){
    		window.location.href = "/Results.jsp";
    	}
    	function check(){
			console.log("checking");
		var list = document.getElementById("list").value;
		if(list == null || list == "nil" || list == "favorite"){
			
			return false;
		}
	
		return true;
		
	
		}
    
    
    </script>
    



</head>

<body>

    <div class="container-fluid">
        <div class="row ">
            <div class="col-10">
                <div class="listTitle text-center" style="margin-bottom: 150px;">Favorites List</div>
                
                <!-- end of content-->
            </div>
            <div class="col-2">
                <form action="/ToList" onsubmit="return check();" method="get">
                    <div class="mt-20">
                        <select name="list" class="btn bg-secondary wth" id="list">
                            <option value="nil" selected=""></option>
                            <option value="favorite">Favorite List</option>
                            <option value="explore">To Explore List</option>
                            <option value="not">Do Not Show List</option>
                        </select>
                    </div>
                    <div class="mt-20">
                        <button class="btn btn-secondary wth" type="submit">Manage List</button>
                    </div>
                </form>
                <div class="mt-20">
                    <button class="btn btn-secondary wth" onclick="toResult();">Back to Results</button>
                </div>
                <div class="mt-20">
                    <button class="btn btn-secondary wth" onclick="toSearch();">Back to Search</button>

                </div>

            </div>
        </div>
        <div class="row" style="padding-top: 50px;">
        <!-- content -->
                <div class="container-fluid" id="listResult">
                

                </div>
        </div>
    </div>
    
    <script>
    
    function mv(list2, itemType, index){
    	
    	console.log("moving");
    	var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function(){
			if(this.readyState == 4 &amp;&amp; this.status == 200){
				console.log("return");
				var user = JSON.parse('{"favoriteRestaurant":[],"favoriteRecipe":[],"exploreRestaurant":[],"exploreRecipe":[],"notRestaurant":[{"address":"3607 Trousdale Pkwy, Los Angeles, CA 90089","phoneNumber":"+12138213445","googleMapsLink":"https://www.google.com/maps/dir/?api\u003d1\u0026origin\u003dTommy Trojan\u0026destination\u003d3607 Trousdale Pkwy, Los Angeles, CA 90089","distance":99.67984174213088,"travelTime":"1 min","isFavorite":false,"isDoNotExplore":false,"isToExplore":false,"uniqueID":"DXFhzx94myitMxmBhsdz8A","price":"$$","rating":3.5,"websiteLink":"usctraditions.com","name":"Traditions"}],"notRecipe":[{"recipeName":"Big Smokey Burgers","imageLink":"https://images.media-allrecipes.com/userphotos/250x250/4045578.jpg","prepTime":"25 m","cookTime":"10 m","ingredients":["2 pounds ground beef sirloin","1/2 onion, grated","1 tablespoon grill seasoning","1 tablespoon liquid smoke flavoring","2 tablespoons Worcestershire sauce","2 tablespoons minced garlic","1 tablespoon adobo sauce from canned chipotle peppers","1 chipotle chile in adobo sauce, chopped","salt and pepper to taste","6 (1 ounce) slices sharp Cheddar cheese (optional)","6 hamburger buns"],"instructions":["1. Preheat an outdoor grill for medium-high heat.","2. Combine ground sirloin, onion, grill seasoning, liquid smoke, Worcestershire sauce, garlic, adobo sauce, and chipotle pepper in a large bowl. Form the mixture into 6 patties. Season with salt and pepper.","3. Place burgers on preheated grill and cook until no longer pink in the center. Place a slice of Cheddar cheese on top of each burger one minute before they are ready. Place burgers on buns to serve."],"isFavorite":false,"isDoNotExplore":false,"isToExplore":false,"rating":4.5,"query":"hamburger"}],"check":"moveRecipe"}');
				
	            console.log(user);
	            location.reload();
			}
		}
		xhttp.open("POST", "MoveListServlet?list1=favorite&amp;list2=" + list2 + "&amp;itemType=" + itemType + "&amp;index=" + index, true);
		xhttp.send();
    	
		return false;
    
    }
    
	function rm(itemType, index){
    	
    	console.log("remove");
    	var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function(){
			if(this.readyState == 4 &amp;&amp; this.status == 200){
				console.log("return");
				var user = JSON.parse('{"favoriteRestaurant":[],"favoriteRecipe":[],"exploreRestaurant":[],"exploreRecipe":[],"notRestaurant":[{"address":"3607 Trousdale Pkwy, Los Angeles, CA 90089","phoneNumber":"+12138213445","googleMapsLink":"https://www.google.com/maps/dir/?api\u003d1\u0026origin\u003dTommy Trojan\u0026destination\u003d3607 Trousdale Pkwy, Los Angeles, CA 90089","distance":99.67984174213088,"travelTime":"1 min","isFavorite":false,"isDoNotExplore":false,"isToExplore":false,"uniqueID":"DXFhzx94myitMxmBhsdz8A","price":"$$","rating":3.5,"websiteLink":"usctraditions.com","name":"Traditions"}],"notRecipe":[{"recipeName":"Big Smokey Burgers","imageLink":"https://images.media-allrecipes.com/userphotos/250x250/4045578.jpg","prepTime":"25 m","cookTime":"10 m","ingredients":["2 pounds ground beef sirloin","1/2 onion, grated","1 tablespoon grill seasoning","1 tablespoon liquid smoke flavoring","2 tablespoons Worcestershire sauce","2 tablespoons minced garlic","1 tablespoon adobo sauce from canned chipotle peppers","1 chipotle chile in adobo sauce, chopped","salt and pepper to taste","6 (1 ounce) slices sharp Cheddar cheese (optional)","6 hamburger buns"],"instructions":["1. Preheat an outdoor grill for medium-high heat.","2. Combine ground sirloin, onion, grill seasoning, liquid smoke, Worcestershire sauce, garlic, adobo sauce, and chipotle pepper in a large bowl. Form the mixture into 6 patties. Season with salt and pepper.","3. Place burgers on preheated grill and cook until no longer pink in the center. Place a slice of Cheddar cheese on top of each burger one minute before they are ready. Place burgers on buns to serve."],"isFavorite":false,"isDoNotExplore":false,"isToExplore":false,"rating":4.5,"query":"hamburger"}],"check":"moveRecipe"}');
				var check = 'Traditions';
				var type = 'null';
				var list = '[Traditions, The Habit Burger Grill, Wahlburgers, Natural History Museum Grill, Trimana]';
				var index = 'null';
				console.log(type);
				console.log(list);
				console.log(index);
				console.log(check);
	            console.log(user);
	            location.reload();
			}
		}
		//changethis
		xhttp.open("POST", "RemoveListServlet?list=favorite&amp;itemType=" + itemType + "&amp;index=" + index, true);
		xhttp.send();
    	
		return false;
    
    }
    
  
	    var restaurant = JSON.parse('[]');
	    var recipe = JSON.parse('[]');
	    console.log(restaurant.length);
	    console.log(recipe.length);
	    
	    var num = 0;
	    var i;
	    var li = document.getElementById('listResult');
	    var alt = "alt";
	    for(i = 0;i &lt; restaurant.length; i++){
	    	var res = restaurant[i];
	    	if(num % 2 == 0){
	    		alt = "alt";
	    	}
	    	else{
	    		alt = "";
	    	}
	    	li.innerHTML += 
	    	    "&lt;div class=\"row\"&gt;&lt;div class=\"col-8\"&gt;&lt;!-- --&gt;&lt;div class=\"" + alt + "\"&gt;"
	    	    +
	    	    createRestaurant(res.name, res.rating, res.distance.toFixed(3), res.price, res.uniqueID, num)
	    	    + "&lt;/div&gt;&lt;!-- --&gt;&lt;/div&gt;&lt;div class=\"col-4 mt-20\"&gt;&lt;div&gt;&lt;button class=\"btn btn-primary wth\" onclick=\"rm(\'restaurant\',\'"+ i +"\')\"&gt;Remove&lt;/button&gt;"
    	    + "&lt;/div&gt;&lt;div class=\"mt-10\"&gt;&lt;div class=\"dropdown\"&gt;&lt;button class=\"btn btn-primary wth dropdown-toggle\" data-toggle=\"dropdown\"&gt;"
			+ "Move To...&lt;/button&gt;&lt;div class=\"dropdown-menu\"&gt;&lt;button class=\"dropdown-item\" onclick=\"mv(\'explore\',\'restaurant\',\'"+ i +"\');\"&gt;To Explore&lt;/button&gt;"
			+ "&lt;button class=\"dropdown-item\" onclick=\"mv(\'not\',\'restaurant\',\'"+ i +"\');\"&gt; Do Not Show &lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;";
				num += 1;
	    }
	    
	    for(i = 0;i &lt; recipe.length; i++){
	    	var rec = recipe[i];
	    	if(num % 2 == 0){
	    		alt = "alt";
	    	}
	    	else{
	    		alt = "";
	    	}
	    	li.innerHTML += "&lt;div class=\"row\"&gt;&lt;div class=\"col-12 col-sm-8\"&gt;&lt;!-- --&gt;&lt;div class=\"" + alt + "\"&gt;"
    	    + createRecipe(rec.recipeName, rec.rating, rec.prepTime, rec.cookTime, rec.price, num)
    	    + "&lt;/div&gt;&lt;!-- --&gt;&lt;/div&gt;&lt;div class=\"col-12 col-sm-4 mt-20\"&gt;&lt;div&gt;&lt;button class=\"btn btn-primary wth\" onclick=\"rm(\'recipe\',\'"+ i +"\')\"&gt;Remove&lt;/button&gt;"
    	    + "&lt;/div&gt;&lt;div class=\"mt-10\"&gt;&lt;div class=\"dropdown\"&gt;&lt;button class=\"btn btn-primary wth dropdown-toggle\" data-toggle=\"dropdown\"&gt;"
			+ "Move To...&lt;/button&gt;&lt;div class=\"dropdown-menu\"&gt;&lt;button class=\"dropdown-item\" onclick=\"mv(\'explore\',\'recipe\',\'"+ i +"\');\"&gt;To Explore&lt;/button&gt;"
			+ "&lt;button class=\"dropdown-item\" onclick=\"mv(\'not\',\'recipe\',\'"+ i +"\');\"&gt; Do Not Show&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;";
			num += 1;
	    }
	    
	    
    
	    
function createRecipe(name, star, prep, cook, price, num){
            
            var div1 = document.createElement('div');
            
            
            var div2 = document.createElement('div');
            div2.classList.add("container");
            
            var div3 = document.createElement('div');
            div3.classList.add("row");
            
            var div4 = document.createElement('div');
            div4.classList.add("col-11");
            
            var div5 = document.createElement('div');
            var h1 = document.createElement('h3');
            h1.innerHTML = name;
            
            var link = document.createElement('a');
            link.href = "/Recipe.jsp?id=" + num;
            link.appendChild(h1);
            
            div5.appendChild(link);
            
            var newDiv = document.createElement('div');
            var h2 = document.createElement('h4');
            if(star == 0){
            	h2.innerHTML = "no rating";
            }
            else{
            	h2.innerHTML = star + "&amp;#9734";
            }
            newDiv.appendChild(h2);
            
            
            var div6 = document.createElement('div');
            var h3 =  document.createElement('h4');
            h3.innerHTML = "Prep Time: " + prep;
            h3.style.cssText = "float: left; margin-right: 20px;";
            var h4 =  document.createElement('h4');
            h4.innerHTML = "Cook Time: " + cook;
            var clear = document.createElement('div');
            clear.cssText = "clear: both";
            div6.appendChild(h3);
            div6.appendChild(h4);
            div6.appendChild(clear);
          
            
            div4.appendChild(div5);
            div4.appendChild(newDiv);
            div4.appendChild(div6);
            
            var div7 = document.createElement('div');
            div7.className = " col-1 mt50";
            var dollar = document.createElement('h3');
            if(price == null){
            	dollar.innerHTML = "$";
            }
            else{
            	dollar.innerHTML = price;
            }
            div7.appendChild(dollar);
            
            div3.appendChild(div4);
            div3.appendChild(div7);
            
            div2.appendChild(div3);
            div1.appendChild(div2);
            //recList.appendChild(div1);
            return div1.innerHTML;
            
        }
        
        function createRestaurant(name, star, dist, price, id, num){
        	
        	var div1 = document.createElement('div');
            if(num % 2 == 0){
            	div1.className = "alt ";
            }
            else{
            	div1.className = "";
            }
            
            var div2 = document.createElement('div');
            div2.classList.add("container");
            
            var div3 = document.createElement('div');
            div3.classList.add("row");
            
            var div4 = document.createElement('div');
            div4.classList.add("col-10");
            
            var div5 = document.createElement('div');
            var h1 = document.createElement('h3');
            h1.innerHTML = name;
            
            var link = document.createElement('a');
            link.href = "/Restaurant.jsp?id=" + id;
            link.appendChild(h1);
            
            div5.appendChild(link);
          
            
            var newDiv = document.createElement('div');
            var h2 = document.createElement('h4');
            if(star == 0){
            	h2.innerHTML = "no rating";
            }
            else{
            	h2.innerHTML = star + "&amp;#9734";
            }
            newDiv.appendChild(h2);
            
           
            var div6 = document.createElement('div');
            var h3 =  document.createElement('h4');
            h3.innerHTML = "Distance: " + dist + " m";
            div6.appendChild(h3);
          
            
            div4.appendChild(div5);
            div4.appendChild(newDiv);
            div4.appendChild(div6);
            
            var div7 = document.createElement('div');
            div7.className = " col-2 mt50";
            var dollar = document.createElement('h3');
            if(price == null){
            	dollar.innerHTML = "$";
            }
            else{
            	dollar.innerHTML = price;
            }
            div7.appendChild(dollar);
            
            div3.appendChild(div4);
            div3.appendChild(div7);
            
            div2.appendChild(div3);
            div1.appendChild(div2);
     		return div1.innerHTML;
        	
        }
    
    
    </script>




</body></html>